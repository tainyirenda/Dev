<!doctype html><meta charset="utf-8">
<title>Forgot password</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<div style="max-width:420px;margin:40px auto;font-family:system-ui">
  <h2>Forgot your password?</h2>
  <p>Enter your email and weâ€™ll send a reset link.</p>
  <input id="email" type="email" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px" placeholder="you@example.com">
  <button id="go" style="margin-top:10px;padding:10px 14px;border-radius:8px;background:#111827;color:#fff">Send link</button>
  <p id="msg" style="margin-top:10px;color:#555"></p>
  <p><a href="API-connection.html">Back to sign in</a></p>
</div>
<script>
const API='https://afroauth-api-g7cqa9cvc4amhqh2.uksouth-01.azurewebsites.net';
go.onclick=async()=>{
  const email=document.getElementById('email').value.trim().toLowerCase();
  const msg=document.getElementById('msg');
  if(!email){msg.textContent='Enter your email.';return;}
  msg.textContent='Sending...';
  try{
    const r=await fetch(API+'/api/request-password-reset',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});
    const d=await r.json().catch(()=>null);
    if(!r.ok) throw new Error(d?.error||('HTTP '+r.status));
    msg.textContent='If that email exists, a reset link has been sent.';
  }catch(e){msg.textContent=e.message;}
};
</script>
